<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Onboarding</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // Icons
        const Check = ({ size = 24, className = "", strokeWidth = 2 }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );
        const X = ({ size = 24, className = "", strokeWidth = 2 }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );
        const ChevronRight = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );
        const ChevronLeft = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        );

        const OnboardingApp = () => {
            const [currentStep, setCurrentStep] = useState(0);
            const [isSubmitted, setIsSubmitted] = useState(false);
            const [onboardingId, setOnboardingId] = useState(null);
            const [viewMode, setViewMode] = useState('home');
            const [selectedCustomer, setSelectedCustomer] = useState(null);
            
            const [products, setProducts] = useState([
                'Maintenance Extension', 'Translation', 'Income Management', 'Income Reconciliation',
                'Updates (v14 or v15)', 'eCourt Integration', 'Payacre', 'Call Secure/Call Secure Plus',
                'Knoydart / Call Secure', 'Payment Portal', 'Stored Card', 'P2PE (TMS)', 'eReturns',
                'Touch Tone', 'Instant Payments', 'SC Payment Portal', 'PRM-CBI', 'TP Trading Banking',
                'Smart Gateway', 'Smart Mobile', 'eSkog', 'Direct Debits', 'POPP', 'EPOS',
                'Jammie-Kelly', 'Optimize Fraud', 'ApplePay/GooglePay', 'Mobile SDK'
            ]);
            
            const [showProductManager, setShowProductManager] = useState(false);
            const [newProduct, setNewProduct] = useState('');
            
            const [formData, setFormData] = useState({
                accountName: '', accountNumber: '', industry: '', accountManager: '', products: [],
                contractValue: '', startDate: '', billingFrequency: '', paymentMethod: '',
                technicalContact: '', technicalEmail: '', businessContact: '', businessEmail: '',
                notes: '', status: 'Pending Implementation'
            });

            const industries = ['Healthcare', 'Education', 'Retail', 'Public Sector', 'Financial Services', 'Other'];
            const billingFrequencies = ['Monthly', 'Quarterly', 'Annually'];
            const paymentMethods = ['Direct Debit', 'Credit Card', 'Bank Transfer', 'Invoice'];
            const statuses = ['Pending Implementation', 'In Implementation', 'Active', 'On Hold', 'Churned'];
            
            const steps = [
                { title: 'Account Info', icon: '1' }, { title: 'Products', icon: '2' },
                { title: 'Commercial', icon: '3' }, { title: 'Contacts', icon: '4' }, { title: 'Review', icon: '5' }
            ];

            const handleInputChange = (field, value) => setFormData(prev => ({ ...prev, [field]: value }));
            
            const handleProductToggle = (product) => {
                setFormData(prev => ({
                    ...prev, products: prev.products.includes(product) ? prev.products.filter(p => p !== product) : [...prev.products, product]
                }));
            };
            
            const addNewProduct = () => {
                if (newProduct.trim() && !products.includes(newProduct.trim())) {
                    setProducts([...products, newProduct.trim()]);
                    setNewProduct('');
                }
            };
            
            const removeProduct = (productToRemove) => {
                setProducts(products.filter(p => p !== productToRemove));
                setFormData(prev => ({ ...prev, products: prev.products.filter(p => p !== productToRemove) }));
            };

            const nextStep = () => { if (currentStep < steps.length - 1) setCurrentStep(currentStep + 1); };
            const prevStep = () => { if (currentStep > 0) setCurrentStep(currentStep - 1); };

            const handleSubmit = () => {
                const newId = 'ONB-' + Date.now().toString().slice(-8);
                setOnboardingId(newId);
                const onboardingData = { id: newId, ...formData, submittedAt: new Date().toISOString() };
                const existingData = JSON.parse(localStorage.getItem('onboardings') || '[]');
                existingData.push(onboardingData);
                localStorage.setItem('onboardings', JSON.stringify(existingData));
                setIsSubmitted(true);
            };

            const resetForm = () => {
                setFormData({
                    accountName: '', accountNumber: '', industry: '', accountManager: '', products: [],
                    contractValue: '', startDate: '', billingFrequency: '', paymentMethod: '',
                    technicalContact: '', technicalEmail: '', businessContact: '', businessEmail: '',
                    notes: '', status: 'Pending Implementation'
                });
                setCurrentStep(0); setIsSubmitted(false); setOnboardingId(null); setViewMode('home');
            };

            const getAllOnboardings = () => JSON.parse(localStorage.getItem('onboardings') || '[]');
            
            const exportToExcel = () => {
                const data = getAllOnboardings();
                if (data.length === 0) { alert('No data to export'); return; }
                const headers = ['ID', 'Name', 'Number', 'Industry', 'Manager', 'Value', 'Start Date', 'Billing', 'Payment', 'Tech Contact', 'Tech Email', 'Biz Contact', 'Biz Email', 'Products', 'Status', 'Submitted', 'Notes'];
                const csvRows = [headers.join(',')];
                data.forEach(row => {
                    const values = [
                        row.id || '', `"${row.accountName || ''}"`, row.accountNumber || '', row.industry || '',
                        row.accountManager || '', row.contractValue || '', row.startDate || '', row.billingFrequency || '',
                        row.paymentMethod || '', row.technicalContact || '', row.technicalEmail || '',
                        row.businessContact || '', row.businessEmail || '', `"${(row.products || []).join('; ')}"`,
                        row.status || '', row.submittedAt || '', `"${(row.notes || '').replace(/"/g, '""')}"`
                    ];
                    csvRows.push(values.join(','));
                });
                const blob = new Blob([csvRows.join('\n')], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `customers_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
            };

            const importFromExcel = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const text = e.target.result;
                        const rows = text.split('\n').slice(1).filter(row => row.trim());
                        const existingData = getAllOnboardings();
                        rows.forEach(row => {
                            const cols = [];
                            let current = '', inQuotes = false;
                            for (let char of row) {
                                if (char === '"') inQuotes = !inQuotes;
                                else if (char === ',' && !inQuotes) { cols.push(current.trim()); current = ''; }
                                else current += char;
                            }
                            cols.push(current.trim());
                            if (cols.length >= 14) {
                                const newRecord = {
                                    id: cols[0] || `ONB-${Date.now()}`, accountName: cols[1].replace(/^"|"$/g, ''),
                                    accountNumber: cols[2], industry: cols[3], accountManager: cols[4],
                                    contractValue: cols[5], startDate: cols[6], billingFrequency: cols[7],
                                    paymentMethod: cols[8], technicalContact: cols[9], technicalEmail: cols[10],
                                    businessContact: cols[11], businessEmail: cols[12],
                                    products: cols[13].replace(/^"|"$/g, '').split(';').map(p => p.trim()).filter(p => p),
                                    status: cols[14] || 'Pending Implementation', submittedAt: cols[15] || new Date().toISOString(),
                                    notes: cols[16] ? cols[16].replace(/^"|"$/g, '').replace(/""/g, '"') : ''
                                };
                                const existingIndex = existingData.findIndex(d => d.id === newRecord.id);
                                if (existingIndex >= 0) existingData[existingIndex] = newRecord;
                                else existingData.push(newRecord);
                            }
                        });
                        localStorage.setItem('onboardings', JSON.stringify(existingData));
                        alert(`Imported ${rows.length} records!`);
                        window.location.reload();
                    } catch (error) { alert('Error importing file'); }
                };
                reader.readAsText(file);
            };

            // HOME VIEW
            if (viewMode === 'home' && !isSubmitted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                        <div className="max-w-7xl mx-auto">
                            <div className="bg-white rounded-lg shadow-sm p-6 mb-6" style={{borderTop: '4px solid #2a5c59'}}>
                                <div className="flex justify-between items-center">
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800">Customer Onboarding</h1>
                                        <p className="text-gray-600 mt-1">Manage your customer onboarding process</p>
                                    </div>
                                    <div className="flex gap-3">
                                        <button onClick={() => setViewMode('form')} className="px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor: '#2a5c59'}}>New Onboarding</button>
                                        <button onClick={() => setViewMode('list')} className="px-6 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700">Customer List</button>
                                    </div>
                                </div>
                            </div>
                            <div className="bg-white rounded-lg shadow-sm p-12 text-center">
                                <h2 className="text-3xl font-bold mb-4" style={{color: '#2a5c59'}}>Welcome</h2>
                                <p className="text-gray-600 mb-8 text-lg">Get started by creating a new onboarding or importing your data</p>
                                <div className="grid grid-cols-2 gap-6 max-w-2xl mx-auto">
                                    <div className="border-2 border-gray-300 rounded-lg p-6 hover:border-teal-600 transition-all cursor-pointer" onClick={() => setViewMode('form')}>
                                        <h3 className="font-bold text-xl mb-2">Create New</h3>
                                        <p className="text-gray-600 text-sm mb-4">Start onboarding a new customer</p>
                                        <button className="px-6 py-2 text-white rounded-lg font-semibold" style={{backgroundColor: '#2a5c59'}}>Start Onboarding</button>
                                    </div>
                                    <div className="border-2 border-gray-300 rounded-lg p-6 hover:border-teal-600 transition-all">
                                        <h3 className="font-bold text-xl mb-2">Import Data</h3>
                                        <p className="text-gray-600 text-sm mb-4">Upload your customer CSV file</p>
                                        <input type="file" accept=".csv" onChange={importFromExcel} style={{display: 'none'}} id="fileInput" />
                                        <button onClick={() => document.getElementById('fileInput').click()} className="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold">Choose File</button>
                                    </div>
                                </div>
                                {getAllOnboardings().length > 0 && (
                                    <div className="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg max-w-2xl mx-auto">
                                        <p className="text-green-800 font-semibold">✓ You have {getAllOnboardings().length} customers</p>
                                        <button onClick={() => setViewMode('list')} className="mt-2 text-teal-700 font-semibold">View List →</button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            // FORM VIEW
            if (viewMode === 'form' && !isSubmitted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                        <div className="max-w-5xl mx-auto">
                            <div className="bg-white rounded-lg shadow-sm p-6 mb-6" style={{borderTop: '4px solid #2a5c59'}}>
                                <button onClick={() => setViewMode('home')} className="text-gray-600 hover:text-gray-800 flex items-center gap-2 mb-4">
                                    <ChevronLeft size={20} /> Back to Home
                                </button>
                                <h1 className="text-3xl font-bold text-gray-800">Customer Onboarding</h1>
                                <p className="text-gray-600 mt-1">Complete the steps below to onboard a new account</p>
                            </div>

                            {/* Progress Steps */}
                            <div className="bg-white rounded-lg shadow-sm p-6 mb-6">
                                <div className="flex justify-between items-center">
                                    {steps.map((step, idx) => (
                                        <div key={idx} className="flex items-center flex-1">
                                            <div className="flex flex-col items-center flex-1">
                                                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${
                                                    idx === currentStep ? 'text-white shadow-lg' : idx < currentStep ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-500'
                                                }`} style={idx === currentStep ? {backgroundColor: '#2a5c59'} : {}}>
                                                    {idx < currentStep ? <Check size={20} /> : step.icon}
                                                </div>
                                                <span className={`text-xs mt-2 font-medium ${idx === currentStep ? 'text-gray-800' : 'text-gray-500'}`}>{step.title}</span>
                                            </div>
                                            {idx < steps.length - 1 && <div className={`h-1 flex-1 mx-2 rounded ${idx < currentStep ? 'bg-green-500' : 'bg-gray-200'}`} />}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-sm p-8">
                                {/* Step 0: Account Info */}
                                {currentStep === 0 && (
                                    <div>
                                        <h2 className="text-2xl font-bold mb-6" style={{color: '#2a5c59'}}>Account Information</h2>
                                        <div className="grid grid-cols-2 gap-6">
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Account Name *</label>
                                                <input type="text" value={formData.accountName} onChange={(e) => handleInputChange('accountName', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Enter account name" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Account Number</label>
                                                <input type="text" value={formData.accountNumber} onChange={(e) => handleInputChange('accountNumber', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Auto-generated or custom" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Industry *</label>
                                                <select value={formData.industry} onChange={(e) => handleInputChange('industry', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg">
                                                    <option value="">Select industry</option>
                                                    {industries.map(ind => <option key={ind} value={ind}>{ind}</option>)}
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Account Manager</label>
                                                <input type="text" value={formData.accountManager} onChange={(e) => handleInputChange('accountManager', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Assigned account manager" />
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Step 1: Products */}
                                {currentStep === 1 && (
                                    <div>
                                        <div className="flex justify-between items-center mb-6">
                                            <div>
                                                <h2 className="text-2xl font-bold" style={{color: '#2a5c59'}}>Select Products</h2>
                                                <p className="text-gray-600 mt-1">Choose all products this account will use</p>
                                            </div>
                                            <button onClick={() => setShowProductManager(!showProductManager)} className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm">
                                                {showProductManager ? 'Hide' : 'Manage Products'}
                                            </button>
                                        </div>

                                        {showProductManager && (
                                            <div className="mb-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg">
                                                <h3 className="font-bold text-gray-800 mb-3">Product Manager</h3>
                                                <div className="flex gap-2 mb-3">
                                                    <input type="text" value={newProduct} onChange={(e) => setNewProduct(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && addNewProduct()} placeholder="Enter new product name" className="flex-1 p-2 border border-gray-300 rounded-lg" />
                                                    <button onClick={addNewProduct} className="px-4 py-2 text-white rounded-lg font-semibold" style={{backgroundColor: '#2a5c59'}}>Add Product</button>
                                                </div>
                                                <div className="text-xs text-gray-600"><strong>Current products ({products.length}):</strong> Click any product to remove it</div>
                                            </div>
                                        )}
                                        
                                        <div className="grid grid-cols-3 gap-3 max-h-96 overflow-y-auto">
                                            {products.map(product => (
                                                <div key={product} className={`p-4 border-2 rounded-lg cursor-pointer transition-all relative group ${formData.products.includes(product) ? 'border-teal-600 bg-teal-50' : 'border-gray-300 hover:border-teal-400'}`}>
                                                    {showProductManager && (
                                                        <button onClick={(e) => { e.stopPropagation(); removeProduct(product); }} className="absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 flex items-center justify-center text-xs">
                                                            <X size={12} />
                                                        </button>
                                                    )}
                                                    <div onClick={() => handleProductToggle(product)}>
                                                        <div className="flex items-center justify-between">
                                                            <div className="flex-1 pr-2"><h3 className="font-semibold text-sm text-gray-800">{product}</h3></div>
                                                            <div className={`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 ${formData.products.includes(product) ? 'bg-teal-600' : 'bg-gray-300'}`}>
                                                                {formData.products.includes(product) && <Check size={14} className="text-white" />}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        <div className="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                            <p className="text-sm text-blue-800"><strong>Selected ({formData.products.length}):</strong> {formData.products.length > 0 ? formData.products.join(', ') : 'None'}</p>
                                        </div>
                                    </div>
                                )}

                                {/* Step 2: Commercial */}
                                {currentStep === 2 && (
                                    <div>
                                        <h2 className="text-2xl font-bold mb-6" style={{color: '#2a5c59'}}>Commercial Details</h2>
                                        <div className="grid grid-cols-2 gap-6">
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Contract Value (£)</label>
                                                <input type="number" value={formData.contractValue} onChange={(e) => handleInputChange('contractValue', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Annual contract value" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Start Date *</label>
                                                <input type="date" value={formData.startDate} onChange={(e) => handleInputChange('startDate', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Billing Frequency</label>
                                                <select value={formData.billingFrequency} onChange={(e) => handleInputChange('billingFrequency', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg">
                                                    <option value="">Select frequency</option>
                                                    {billingFrequencies.map(freq => <option key={freq} value={freq}>{freq}</option>)}
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Payment Method</label>
                                                <select value={formData.paymentMethod} onChange={(e) => handleInputChange('paymentMethod', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg">
                                                    <option value="">Select method</option>
                                                    {paymentMethods.map(method => <option key={method} value={method}>{method}</option>)}
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Status</label>
                                                <select value={formData.status} onChange={(e) => handleInputChange('status', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg">
                                                    {statuses.map(status => <option key={status} value={status}>{status}</option>)}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Step 3: Contacts */}
                                {currentStep === 3 && (
                                    <div>
                                        <h2 className="text-2xl font-bold mb-6" style={{color: '#2a5c59'}}>Contact Information</h2>
                                        <div className="mb-8">
                                            <h3 className="text-lg font-semibold mb-4 text-gray-800">Technical Contact</h3>
                                            <div className="grid grid-cols-2 gap-6">
                                                <div>
                                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Name</label>
                                                    <input type="text" value={formData.technicalContact} onChange={(e) => handleInputChange('technicalContact', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Technical contact name" />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Email</label>
                                                    <input type="email" value={formData.technicalEmail} onChange={(e) => handleInputChange('technicalEmail', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="technical@example.com" />
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-semibold mb-4 text-gray-800">Business Contact</h3>
                                            <div className="grid grid-cols-2 gap-6">
                                                <div>
                                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Name</label>
                                                    <input type="text" value={formData.businessContact} onChange={(e) => handleInputChange('businessContact', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="Business contact name" />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Email</label>
                                                    <input type="email" value={formData.businessEmail} onChange={(e) => handleInputChange('businessEmail', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" placeholder="business@example.com" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Step 4: Review */}
                                {currentStep === 4 && (
                                    <div>
                                        <h2 className="text-2xl font-bold mb-6" style={{color: '#2a5c59'}}>Review & Submit</h2>
                                        <div className="space-y-6">
                                            <div className="border-l-4 border-teal-600 pl-4">
                                                <h3 className="font-bold text-gray-800 mb-2">Account Information</h3>
                                                <div className="grid grid-cols-2 gap-4 text-sm">
                                                    <div><span className="font-semibold">Name:</span> {formData.accountName || 'Not provided'}</div>
                                                    <div><span className="font-semibold">Number:</span> {formData.accountNumber || 'Auto-generated'}</div>
                                                    <div><span className="font-semibold">Industry:</span> {formData.industry || 'Not selected'}</div>
                                                    <div><span className="font-semibold">Manager:</span> {formData.accountManager || 'Not assigned'}</div>
                                                </div>
                                            </div>

                                            <div className="border-l-4 border-teal-600 pl-4">
                                                <h3 className="font-bold text-gray-800 mb-2">Products</h3>
                                                <p className="text-sm">{formData.products.length > 0 ? formData.products.join(', ') : 'No products selected'}</p>
                                            </div>

                                            <div className="border-l-4 border-teal-600 pl-4">
                                                <h3 className="font-bold text-gray-800 mb-2">Commercial Details</h3>
                                                <div className="grid grid-cols-2 gap-4 text-sm">
                                                    <div><span className="font-semibold">Contract Value:</span> £{formData.contractValue || '0'}</div>
                                                    <div><span className="font-semibold">Start Date:</span> {formData.startDate || 'Not set'}</div>
                                                    <div><span className="font-semibold">Billing:</span> {formData.billingFrequency || 'Not selected'}</div>
                                                    <div><span className="font-semibold">Payment:</span> {formData.paymentMethod || 'Not selected'}</div>
                                                    <div><span className="font-semibold">Status:</span> {formData.status}</div>
                                                </div>
                                            </div>

                                            <div className="border-l-4 border-teal-600 pl-4">
                                                <h3 className="font-bold text-gray-800 mb-2">Contacts</h3>
                                                <div className="grid grid-cols-2 gap-4 text-sm">
                                                    <div><span className="font-semibold">Technical:</span> {formData.technicalContact || 'Not provided'} ({formData.technicalEmail || 'N/A'})</div>
                                                    <div><span className="font-semibold">Business:</span> {formData.businessContact || 'Not provided'} ({formData.businessEmail || 'N/A'})</div>
                                                </div>
                                            </div>

                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Additional Notes</label>
                                                <textarea value={formData.notes} onChange={(e) => handleInputChange('notes', e.target.value)} className="w-full p-3 border border-gray-300 rounded-lg" rows="4" placeholder="Any additional information..." />
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Navigation Buttons */}
                                <div className="flex justify-between mt-8 pt-6 border-t">
                                    <button onClick={prevStep} disabled={currentStep === 0} className={`flex items-center px-6 py-3 rounded-lg font-semibold ${currentStep === 0 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}>
                                        <ChevronLeft size={20} className="mr-2" /> Previous
                                    </button>
                                    
                                    {currentStep < steps.length - 1 ? (
                                        <button onClick={nextStep} className="flex items-center px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor: '#2a5c59'}}>
                                            Next <ChevronRight size={20} className="ml-2" />
                                        </button>
                                    ) : (
                                        <button onClick={handleSubmit} className="flex items-center px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor: '#E5173F'}}>
                                            <Check size={20} className="mr-2" /> Complete Onboarding
                                        </button>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // SUCCESS VIEW
            if (isSubmitted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-lg shadow-lg p-8 mb-6 text-center" style={{borderTop: '6px solid #10b981'}}>
                                <div className="flex justify-center mb-4">
                                    <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center">
                                        <Check size={48} className="text-green-600" />
                                    </div>
                                </div>
                                <h1 className="text-3xl font-bold text-gray-800 mb-2">Onboarding Complete!</h1>
                                <p className="text-gray-600 text-lg">Account successfully submitted</p>
                                <div className="mt-4 inline-block bg-gray-100 px-6 py-2 rounded-full">
                                    <span className="text-sm font-semibold text-gray-700">Onboarding ID: </span>
                                    <span className="text-sm font-mono font-bold" style={{color: '#2a5c59'}}>{onboardingId}</span>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-sm p-6">
                                <div className="grid grid-cols-2 gap-4">
                                    <button onClick={() => setViewMode('list')} className="p-4 border-2 border-gray-300 rounded-lg hover:border-teal-600 text-left">
                                        <div className="font-semibold text-gray-800">View Customer List</div>
                                        <div className="text-sm text-gray-600 mt-1">See all onboarded customers</div>
                                    </button>
                                    <button onClick={exportToExcel} className="p-4 border-2 border-gray-300 rounded-lg hover:border-teal-600 text-left">
                                        <div className="font-semibold text-gray-800">Export to Excel</div>
                                        <div className="text-sm text-gray-600 mt-1">Download CSV file</div>
                                    </button>
                                </div>
                                <div className="mt-6 pt-6 border-t">
                                    <button onClick={resetForm} className="w-full p-4 rounded-lg font-semibold text-white" style={{backgroundColor: '#2a5c59'}}>
                                        Onboard Another Account
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // CUSTOMER LIST VIEW (simplified)
            if (viewMode === 'list') {
                const customers = getAllOnboardings();
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                        <div className="max-w-7xl mx-auto">
                            <div className="bg-white rounded-lg shadow-sm p-6 mb-6" style={{borderTop: '4px solid #2a5c59'}}>
                                <div className="flex justify-between items-center">
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800">Customer List</h1>
                                        <p className="text-gray-600 mt-1">{customers.length} customers onboarded</p>
                                    </div>
                                    <div className="flex gap-3">
                                        <button onClick={() => setViewMode('home')} className="px-6 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700">Home</button>
                                        <button onClick={exportToExcel} className="px-6 py-3 rounded-lg font-semibold bg-green-600 text-white">Export to Excel</button>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-sm p-6">
                                {customers.length === 0 ? (
                                    <div className="text-center py-12 text-gray-500">
                                        <p className="text-lg font-semibold mb-2">No customers yet</p>
                                        <button onClick={() => setViewMode('form')} className="mt-4 px-6 py-2 text-white rounded-lg font-semibold" style={{backgroundColor: '#2a5c59'}}>
                                            Add First Customer
                                        </button>
                                    </div>
                                ) : (
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm">
                                            <thead>
                                                <tr className="border-b-2" style={{borderColor: '#2a5c59'}}>
                                                    <th className="text-left p-3 font-bold" style={{color: '#2a5c59'}}>Account Name</th>
                                                    <th className="text-left p-3 font-bold" style={{color: '#2a5c59'}}>Industry</th>
                                                    <th className="text-left p-3 font-bold" style={{color: '#2a5c59'}}>Manager</th>
                                                    <th className="text-right p-3 font-bold" style={{color: '#2a5c59'}}>Value (£)</th>
                                                    <th className="text-center p-3 font-bold" style={{color: '#2a5c59'}}>Products</th>
                                                    <th className="text-center p-3 font-bold" style={{color: '#2a5c59'}}>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {customers.map((customer) => (
                                                    <tr key={customer.id} className="border-b hover:bg-gray-50">
                                                        <td className="p-3 font-semibold">{customer.accountName}</td>
                                                        <td className="p-3 text-gray-600">{customer.industry}</td>
                                                        <td className="p-3 text-gray-600">{customer.accountManager}</td>
                                                        <td className="p-3 text-right font-semibold">
                                                            {customer.contractValue ? `£${Number(customer.contractValue).toLocaleString()}` : '-'}
                                                        </td>
                                                        <td className="p-3 text-center">
                                                            <span className="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold">
                                                                {customer.products?.length || 0}
                                                            </span>
                                                        </td>
                                                        <td className="p-3 text-center">
                                                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${
                                                                customer.status === 'Active' ? 'bg-green-100 text-green-700' :
                                                                customer.status === 'In Implementation' ? 'bg-amber-100 text-amber-700' :
                                                                customer.status === 'On Hold' ? 'bg-orange-100 text-orange-700' :
                                                                customer.status === 'Churned' ? 'bg-red-100 text-red-700' :
                                                                'bg-blue-100 text-blue-700'
                                                            }`}>
                                                                {customer.status}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OnboardingApp />);
    </script>
</body>
</html>
