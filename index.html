<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Onboarding Application</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Lucide Icons as inline SVG components
    const Calendar = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
    );

    const Save = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
        <polyline points="17 21 17 13 7 13 7 21"></polyline>
        <polyline points="7 3 7 8 15 8"></polyline>
      </svg>
    );

    const X = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const Upload = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17 8 12 3 7 8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
    );

    const Download = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
    );

    const Plus = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    );

    const Edit2 = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
      </svg>
    );

    const Trash2 = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
      </svg>
    );

    const Check = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    );

    const Users = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
    );

    const TrendingUp = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
        <polyline points="17 6 23 6 23 12"></polyline>
      </svg>
    );

    const LayoutGrid = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="3" y="3" width="7" height="7"></rect>
        <rect x="14" y="3" width="7" height="7"></rect>
        <rect x="14" y="14" width="7" height="7"></rect>
        <rect x="3" y="14" width="7" height="7"></rect>
      </svg>
    );

    const Clock = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    );

    const CalendarDays = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
        <path d="M8 14h.01"></path>
        <path d="M12 14h.01"></path>
        <path d="M16 14h.01"></path>
        <path d="M8 18h.01"></path>
        <path d="M12 18h.01"></path>
        <path d="M16 18h.01"></path>
      </svg>
    );

    const INITIAL_PRODUCTS = [
      'Maintenance Extension', 'Translation', 'Income Management', 'Income Reconciliation',
      'Updates (v14 or v15)', 'eCourt Integration', 'Payacre', 'Call Secure/Call Secure Plus',
      'Knoydart / Call Secure', 'Payment Portal', 'Stored Card', 'P2PE (TMS)',
      'eReturns', 'Touch Tone', 'Instant Payments', 'SC Payment Portal',
      'PRM-CBI', 'TP Trading Banking', 'Smart Gateway', 'Smart Mobile',
      'eSkog', 'Direct Debits', 'POPP', 'EPOS',
      'Jammie-Kelly', 'Optimize Fraud', 'ApplePay/GooglePay', 'Mobile SDK'
    ];

    const App = () => {
      const [view, setView] = useState('list');
      const [customers, setCustomers] = useState([]);
      const [products, setProducts] = useState(INITIAL_PRODUCTS);
      const [currentCustomer, setCurrentCustomer] = useState(null);
      const [step, setStep] = useState(1);
      const [formData, setFormData] = useState({
        accountInfo: { name: '', id: '', industry: '', region: '' },
        products: {},
        commercial: { arr: '', contract: '', renewalDate: '' },
        contacts: [{ name: '', email: '', role: '' }],
        events: []
      });
      const [newProduct, setNewProduct] = useState('');
      const [showProductManager, setShowProductManager] = useState(false);
      const [selectedCustomerForEvents, setSelectedCustomerForEvents] = useState(null);
      const [showEventForm, setShowEventForm] = useState(false);
      const [eventFormData, setEventFormData] = useState({
        type: 'Review',
        meetingType: 'F2F',
        date: '',
        subject: '',
        notes: ''
      });

      useEffect(() => {
        loadData();
      }, []);

      const loadData = () => {
        try {
          const stored = localStorage.getItem('onboarding-data');
          if (stored) {
            const data = JSON.parse(stored);
            setCustomers(data.customers || []);
            setProducts(data.products || INITIAL_PRODUCTS);
          }
        } catch (e) {
          console.log('No stored data found');
        }
      };

      const saveData = (updatedCustomers, updatedProducts) => {
        try {
          localStorage.setItem('onboarding-data', JSON.stringify({
            customers: updatedCustomers || customers,
            products: updatedProducts || products
          }));
        } catch (e) {
          console.error('Save failed:', e);
        }
      };

      const addProduct = () => {
        if (newProduct && !products.includes(newProduct)) {
          const updated = [...products, newProduct];
          setProducts(updated);
          saveData(customers, updated);
          setNewProduct('');
        }
      };

      const deleteProduct = (prod) => {
        const updated = products.filter(p => p !== prod);
        setProducts(updated);
        const updatedCustomers = customers.map(c => ({
          ...c,
          products: Object.fromEntries(
            Object.entries(c.products).filter(([k]) => k !== prod)
          )
        }));
        setCustomers(updatedCustomers);
        saveData(updatedCustomers, updated);
      };

      const startOnboarding = () => {
        setFormData({
          accountInfo: { name: '', id: '', industry: '', region: '' },
          products: {},
          commercial: { arr: '', contract: '', renewalDate: '' },
          contacts: [{ name: '', email: '', role: '' }],
          events: []
        });
        setCurrentCustomer(null);
        setStep(1);
        setView('onboard');
      };

      const editCustomer = (customer) => {
        setCurrentCustomer(customer);
        setFormData({
          accountInfo: customer.accountInfo,
          products: customer.products,
          commercial: customer.commercial,
          contacts: customer.contacts,
          events: customer.events || []
        });
        setStep(1);
        setView('onboard');
      };

      const saveCustomer = () => {
        const customer = {
          id: currentCustomer?.id || Date.now().toString(),
          ...formData,
          createdAt: currentCustomer?.createdAt || new Date().toISOString()
        };
        
        let updated;
        if (currentCustomer) {
          updated = customers.map(c => c.id === currentCustomer.id ? customer : c);
        } else {
          updated = [...customers, customer];
        }
        
        setCustomers(updated);
        saveData(updated, products);
        setView('list');
        setCurrentCustomer(null);
      };

      const deleteCustomer = (id) => {
        if (confirm('Delete this customer?')) {
          const updated = customers.filter(c => c.id !== id);
          setCustomers(updated);
          saveData(updated, products);
        }
      };

      const exportData = () => {
        const csv = [
          ['Customer Name', 'ID', 'Industry', 'Region', 'ARR', 'Contract', 'Renewal Date', ...products],
          ...customers.map(c => [
            c.accountInfo.name, c.accountInfo.id, c.accountInfo.industry, c.accountInfo.region,
            c.commercial.arr, c.commercial.contract, c.commercial.renewalDate,
            ...products.map(p => c.products[p] ? 'Yes' : 'No')
          ])
        ].map(row => row.join(',')).join('\n');
        
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'customers.csv';
        a.click();
      };

      const importData = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (event) => {
          const text = event.target.result;
          const lines = text.split('\n');
          const headers = lines[0].split(',');
          
          const imported = lines.slice(1).filter(line => line.trim()).map(line => {
            const values = line.split(',');
            const prods = {};
            products.forEach((p, i) => {
              const idx = headers.indexOf(p);
              if (idx >= 0) prods[p] = values[idx]?.toLowerCase() === 'yes';
            });
            
            return {
              id: Date.now().toString() + Math.random(),
              accountInfo: {
                name: values[0] || '',
                id: values[1] || '',
                industry: values[2] || '',
                region: values[3] || ''
              },
              commercial: {
                arr: values[4] || '',
                contract: values[5] || '',
                renewalDate: values[6] || ''
              },
              products: prods,
              contacts: [{ name: '', email: '', role: '' }],
              events: [],
              createdAt: new Date().toISOString()
            };
          });
          
          const updated = [...customers, ...imported];
          setCustomers(updated);
          saveData(updated, products);
        };
        reader.readAsText(file);
      };

      const addEvent = (customerId) => {
        if (!eventFormData.date || !eventFormData.subject) {
          alert('Please fill in date and subject');
          return;
        }

        const updated = customers.map(c => {
          if (c.id === customerId) {
            return {
              ...c,
              events: [...(c.events || []), { 
                type: eventFormData.type,
                meetingType: eventFormData.meetingType,
                date: eventFormData.date,
                subject: eventFormData.subject,
                notes: eventFormData.notes
              }]
            };
          }
          return c;
        });
        setCustomers(updated);
        setSelectedCustomerForEvents(updated.find(c => c.id === customerId));
        saveData(updated, products);
        
        // Reset form
        setEventFormData({
          type: 'Review',
          meetingType: 'F2F',
          date: '',
          subject: '',
          notes: ''
        });
        setShowEventForm(false);
      };

      const stepLabels = ['Account', 'Products', 'Commercial', 'Contacts', 'Review'];

      const renderOnboarding = () => {
        const inputClass = "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all";
        
        switch(step) {
          case 1:
            return (
              <div className="space-y-6">
                <div className="space-y-2">
                  <label className="block text-sm font-semibold text-gray-700">Customer Name</label>
                  <input
                    className={inputClass}
                    placeholder="Enter customer name"
                    value={formData.accountInfo.name}
                    onChange={e => setFormData({...formData, accountInfo: {...formData.accountInfo, name: e.target.value}})}
                  />
                </div>
                <div className="space-y-2">
                  <label className="block text-sm font-semibold text-gray-700">Customer ID</label>
                  <input
                    className={inputClass}
                    placeholder="Enter unique identifier"
                    value={formData.accountInfo.id}
                    onChange={e => setFormData({...formData, accountInfo: {...formData.accountInfo, id: e.target.value}})}
                  />
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div className="space-y-2">
                    <label className="block text-sm font-semibold text-gray-700">Industry</label>
                    <input
                      className={inputClass}
                      placeholder="e.g., Finance, Healthcare"
                      value={formData.accountInfo.industry}
                      onChange={e => setFormData({...formData, accountInfo: {...formData.accountInfo, industry: e.target.value}})}
                    />
                  </div>
                  <div className="space-y-2">
                    <label className="block text-sm font-semibold text-gray-700">Region</label>
                    <input
                      className={inputClass}
                      placeholder="e.g., EMEA, Americas"
                      value={formData.accountInfo.region}
                      onChange={e => setFormData({...formData, accountInfo: {...formData.accountInfo, region: e.target.value}})}
                    />
                  </div>
                </div>
              </div>
            );
          
          case 2:
            return (
              <div className="space-y-6">
                <div className="flex justify-between items-center">
                  <div>
                    <h3 className="text-lg font-semibold text-gray-800">Select Products</h3>
                    <p className="text-sm text-gray-500 mt-1">Choose all products for this customer</p>
                  </div>
                  <button
                    onClick={() => setShowProductManager(!showProductManager)}
                    className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all flex items-center"
                  >
                    <LayoutGrid size={16} className="inline mr-2" />
                    Manage Products
                  </button>
                </div>
                
                {showProductManager && (
                  <div className="p-6 bg-purple-50 rounded-lg border border-purple-200">
                    <h3 className="font-semibold text-gray-800 mb-4 flex items-center">
                      <Plus size={18} className="inline mr-2 text-purple-600" />
                      Product Manager
                    </h3>
                    <div className="flex gap-2 mb-4">
                      <input
                        className="flex-1 px-4 py-3 bg-white border border-purple-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                        placeholder="Enter new product name"
                        value={newProduct}
                        onChange={e => setNewProduct(e.target.value)}
                        onKeyPress={e => e.key === 'Enter' && addProduct()}
                      />
                      <button onClick={addProduct} className="px-5 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all">
                        <Plus size={20} />
                      </button>
                    </div>
                    <div className="space-y-2 max-h-60 overflow-y-auto">
                      {products.map(p => (
                        <div key={p} className="flex justify-between items-center p-3 bg-white rounded-lg shadow-sm">
                          <span className="text-sm font-medium text-gray-700">{p}</span>
                          <button
                            onClick={() => deleteProduct(p)}
                            className="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all"
                          >
                            <Trash2 size={16} />
                          </button>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
                
                <div className="grid grid-cols-2 gap-3 max-h-96 overflow-y-auto">
                  {products.map(product => (
                    <label key={product} className="flex items-center space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all">
                      <input
                        type="checkbox"
                        checked={formData.products[product] || false}
                        onChange={e => setFormData({
                          ...formData,
                          products: {...formData.products, [product]: e.target.checked}
                        })}
                        className="w-5 h-5 text-blue-600 rounded"
                      />
                      <span className="text-sm font-medium text-gray-700">{product}</span>
                    </label>
                  ))}
                </div>
              </div>
            );
          
          case 3:
            return (
              <div className="space-y-6">
                <div className="space-y-2">
                  <label className="block text-sm font-semibold text-gray-700">Annual Recurring Revenue (ARR)</label>
                  <div className="relative">
                    <span className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-semibold">£</span>
                    <input
                      className={inputClass + " pl-8"}
                      placeholder="0.00"
                      value={formData.commercial.arr}
                      onChange={e => setFormData({...formData, commercial: {...formData.commercial, arr: e.target.value}})}
                    />
                  </div>
                </div>
                <div className="space-y-2">
                  <label className="block text-sm font-semibold text-gray-700">Contract Type</label>
                  <input
                    className={inputClass}
                    placeholder="e.g., Annual, Multi-year"
                    value={formData.commercial.contract}
                    onChange={e => setFormData({...formData, commercial: {...formData.commercial, contract: e.target.value}})}
                  />
                </div>
                <div className="space-y-2">
                  <label className="block text-sm font-semibold text-gray-700">Renewal Date</label>
                  <input
                    type="date"
                    className={inputClass}
                    value={formData.commercial.renewalDate}
                    onChange={e => setFormData({...formData, commercial: {...formData.commercial, renewalDate: e.target.value}})}
                  />
                </div>
              </div>
            );
          
          case 4:
            return (
              <div className="space-y-6">
                <div className="flex justify-between items-center">
                  <div>
                    <h3 className="text-lg font-semibold text-gray-800">Contact Information</h3>
                    <p className="text-sm text-gray-500 mt-1">Add key contacts for this account</p>
                  </div>
                  <button
                    onClick={() => setFormData({...formData, contacts: [...formData.contacts, {name: '', email: '', role: ''}]})}
                    className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center"
                  >
                    <Plus size={16} className="inline mr-2" />
                    Add Contact
                  </button>
                </div>
                
                <div className="space-y-4 max-h-96 overflow-y-auto">
                  {formData.contacts.map((contact, i) => (
                    <div key={i} className="p-6 bg-gray-50 rounded-lg border border-gray-200 space-y-4">
                      <div className="flex justify-between items-center">
                        <h4 className="font-semibold text-gray-700">Contact {i + 1}</h4>
                        {formData.contacts.length > 1 && (
                          <button
                            onClick={() => {
                              const updated = formData.contacts.filter((_, idx) => idx !== i);
                              setFormData({...formData, contacts: updated});
                            }}
                            className="text-red-500 hover:bg-red-50 p-2 rounded-lg"
                          >
                            <Trash2 size={16} />
                          </button>
                        )}
                      </div>
                      <input
                        className={inputClass}
                        placeholder="Full name"
                        value={contact.name}
                        onChange={e => {
                          const updated = [...formData.contacts];
                          updated[i].name = e.target.value;
                          setFormData({...formData, contacts: updated});
                        }}
                      />
                      <input
                        className={inputClass}
                        placeholder="Email address"
                        type="email"
                        value={contact.email}
                        onChange={e => {
                          const updated = [...formData.contacts];
                          updated[i].email = e.target.value;
                          setFormData({...formData, contacts: updated});
                        }}
                      />
                      <input
                        className={inputClass}
                        placeholder="Role or title"
                        value={contact.role}
                        onChange={e => {
                          const updated = [...formData.contacts];
                          updated[i].role = e.target.value;
                          setFormData({...formData, contacts: updated});
                        }}
                      />
                    </div>
                  ))}
                </div>
              </div>
            );
          
          case 5:
            return (
              <div className="space-y-6">
                <div className="grid grid-cols-2 gap-6">
                  <div className="p-6 bg-blue-50 rounded-lg border border-blue-200">
                    <h3 className="font-semibold text-gray-800 mb-4 flex items-center">
                      <Users size={18} className="inline mr-2 text-blue-600" />
                      Account Information
                    </h3>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span className="text-gray-600">Name:</span>
                        <span className="font-semibold text-gray-800">{formData.accountInfo.name}</span>
                      </div>
                      <div className="flex justify-between">
                        <span className="text-gray-600">ID:</span>
                        <span className="font-semibold text-gray-800">{formData.accountInfo.id}</span>
                      </div>
                      <div className="flex justify-between">
                        <span className="text-gray-600">Industry:</span>
                        <span className="font-semibold text-gray-800">{formData.accountInfo.industry}</span>
                      </div>
                      <div className="flex justify-between">
                        <span className="text-gray-600">Region:</span>
                        <span className="font-semibold text-gray-800">{formData.accountInfo.region}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div className="p-6 bg-green-50 rounded-lg border border-green-200">
                    <h3 className="font-semibold text-gray-800 mb-4 flex items-center">
                      <TrendingUp size={18} className="inline mr-2 text-green-600" />
                      Commercial Details
                    </h3>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span className="text-gray-600">ARR:</span>
                        <span className="font-semibold text-gray-800">£{formData.commercial.arr}</span>
                      </div>
                      <div className="flex justify-between">
                        <span className="text-gray-600">Contract:</span>
                        <span className="font-semibold text-gray-800">{formData.commercial.contract}</span>
                      </div>
                      <div className="flex justify-between">
                        <span className="text-gray-600">Renewal:</span>
                        <span className="font-semibold text-gray-800">{formData.commercial.renewalDate}</span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div className="p-6 bg-purple-50 rounded-lg border border-purple-200">
                  <h3 className="font-semibold text-gray-800 mb-3 flex items-center">
                    <LayoutGrid size={18} className="inline mr-2 text-purple-600" />
                    Products Selected ({Object.values(formData.products).filter(Boolean).length})
                  </h3>
                  <div className="flex flex-wrap gap-2">
                    {Object.entries(formData.products).filter(([,v]) => v).map(([p]) => (
                      <span key={p} className="px-3 py-1.5 bg-white text-purple-700 rounded-lg text-xs font-medium border border-purple-200">
                        {p}
                      </span>
                    ))}
                  </div>
                </div>
              </div>
            );
        }
      };

      const renderList = () => (
        <div className="space-y-6">
          <div className="flex justify-between items-center">
            <div>
              <h2 className="text-2xl font-bold text-gray-800">Customer Portfolio</h2>
              <p className="text-gray-600 mt-1">{customers.length} active customers</p>
            </div>
            <div className="flex gap-3">
              <label className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-all flex items-center">
                <Upload size={18} className="inline mr-2" />
                Import CSV
                <input type="file" accept=".csv" onChange={importData} className="hidden" />
              </label>
              <button onClick={exportData} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center">
                <Download size={18} className="inline mr-2" />
                Export CSV
              </button>
              <button onClick={startOnboarding} className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all flex items-center">
                <Plus size={18} className="inline mr-2" />
                New Customer
              </button>
            </div>
          </div>
          
          <div className="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
            <div className="overflow-x-auto" style={{maxHeight: '70vh'}}>
              <table className="w-full">
                <thead className="bg-gray-50 sticky top-0">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10">Customer</th>
                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase">ID</th>
                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase">Industry</th>
                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase">ARR</th>
                    {products.map(p => (
                      <th key={p} className="px-2 py-3 text-xs font-bold text-gray-700 uppercase" style={{minWidth: '80px', writingMode: 'vertical-rl', transform: 'rotate(180deg)'}}>
                        {p}
                      </th>
                    ))}
                    <th className="px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase sticky right-0 bg-gray-50 z-10">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-100">
                  {customers.map((c, idx) => (
                    <tr key={c.id} className={`hover:bg-blue-50 ${idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>
                      <td className="px-6 py-4 font-semibold text-gray-800 sticky left-0 bg-inherit z-10">
                        <div className="flex items-center gap-3">
                          <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">
                            {c.accountInfo.name.charAt(0)}
                          </div>
                          {c.accountInfo.name}
                        </div>
                      </td>
                      <td className="px-4 py-4 text-sm text-gray-600">{c.accountInfo.id}</td>
                      <td className="px-4 py-4 text-sm text-gray-600">{c.accountInfo.industry}</td>
                      <td className="px-4 py-4 text-sm font-semibold text-green-600">£{c.commercial.arr}</td>
                      {products.map(p => (
                        <td key={p} className="px-2 py-4 text-center">
                          {c.products[p] ? (
                            <div className="inline-flex items-center justify-center w-6 h-6 bg-green-100 rounded">
                              <Check size={14} className="text-green-600" />
                            </div>
                          ) : (
                            <div className="inline-flex items-center justify-center w-6 h-6 bg-gray-100 rounded">
                              <X size={14} className="text-gray-400" />
                            </div>
                          )}
                        </td>
                      ))}
                      <td className="px-6 py-4 sticky right-0 bg-inherit z-10">
                        <div className="flex gap-2 justify-center">
                          <button 
                            onClick={() => {
                              setSelectedCustomerForEvents(c);
                              setView('events');
                            }}
                            className="p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-all"
                            title="Manage Events"
                          >
                            <CalendarDays size={18} />
                          </button>
                          <button onClick={() => editCustomer(c)} className="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all">
                            <Edit2 size={18} />
                          </button>
                          <button onClick={() => deleteCustomer(c.id)} className="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all">
                            <Trash2 size={18} />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      );

      const renderEventManagement = () => {
        if (!selectedCustomerForEvents) return null;

        const currentCustomerData = customers.find(c => c.id === selectedCustomerForEvents.id) || selectedCustomerForEvents;

        return (
          <div className="space-y-6">
            <div className="flex justify-between items-center">
              <div>
                <h2 className="text-xl font-bold text-gray-800">Manage Events: {currentCustomerData.accountInfo.name}</h2>
                <p className="text-gray-600 mt-1 text-xs">Schedule reviews and meetings</p>
              </div>
              <button 
                onClick={() => {
                  setSelectedCustomerForEvents(null);
                  setShowEventForm(false);
                  setView('list');
                }}
                className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm"
              >
                Back to List
              </button>
            </div>

            <div className="grid grid-cols-2 gap-6">
              <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="font-semibold text-base">Schedule Event</h3>
                  {!showEventForm && (
                    <button 
                      onClick={() => setShowEventForm(true)}
                      className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-sm flex items-center"
                    >
                      <Plus size={16} className="inline mr-2" />
                      New Event
                    </button>
                  )}
                </div>

                {showEventForm ? (
                  <div className="space-y-4">
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-xs font-semibold text-gray-700 mb-1">Event Type</label>
                        <select
                          value={eventFormData.type}
                          onChange={e => setEventFormData({...eventFormData, type: e.target.value})}
                          className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="Review">Review</option>
                          <option value="Meeting">Meeting</option>
                        </select>
                      </div>
                      <div>
                        <label className="block text-xs font-semibold text-gray-700 mb-1">Meeting Type</label>
                        <select
                          value={eventFormData.meetingType}
                          onChange={e => setEventFormData({...eventFormData, meetingType: e.target.value})}
                          className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="F2F">Face to Face</option>
                          <option value="Telephone">Telephone</option>
                          <option value="Teams">Teams</option>
                          <option value="Zoom">Zoom</option>
                        </select>
                      </div>
                    </div>

                    <div>
                      <label className="block text-xs font-semibold text-gray-700 mb-1">Date</label>
                      <input
                        type="date"
                        value={eventFormData.date}
                        onChange={e => setEventFormData({...eventFormData, date: e.target.value})}
                        className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>

                    <div>
                      <label className="block text-xs font-semibold text-gray-700 mb-1">Subject</label>
                      <input
                        type="text"
                        value={eventFormData.subject}
                        onChange={e => setEventFormData({...eventFormData, subject: e.target.value})}
                        placeholder="e.g., Q4 Business Review"
                        className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>

                    <div>
                      <label className="block text-xs font-semibold text-gray-700 mb-1">Notes</label>
                      <textarea
                        value={eventFormData.notes}
                        onChange={e => setEventFormData({...eventFormData, notes: e.target.value})}
                        placeholder="Additional notes or agenda items..."
                        rows={4}
                        className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>

                    <div className="flex gap-2 pt-2">
                      <button 
                        onClick={() => addEvent(currentCustomerData.id)}
                        className="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-semibold"
                      >
                        Save Event
                      </button>
                      <button 
                        onClick={() => {
                          setShowEventForm(false);
                          setEventFormData({
                            type: 'Review',
                            meetingType: 'F2F',
                            date: '',
                            subject: '',
                            notes: ''
                          });
                        }}
                        className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all text-sm"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                ) : (
                  <p className="text-gray-500 text-center py-8 text-sm">Click "New Event" to schedule a review or meeting</p>
                )}
              </div>

              <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
                <h3 className="font-semibold text-base mb-4">Customer Details</h3>
                <div className="space-y-2 text-xs">
                  <div className="flex justify-between">
                    <span className="text-gray-600">ID:</span>
                    <span className="font-semibold">{currentCustomerData.accountInfo.id}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Industry:</span>
                    <span className="font-semibold">{currentCustomerData.accountInfo.industry}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">ARR:</span>
                    <span className="font-semibold text-green-600">£{currentCustomerData.commercial.arr}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Renewal Date:</span>
                    <span className="font-semibold">{currentCustomerData.commercial.renewalDate}</span>
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
              <h3 className="font-semibold text-base mb-4">Scheduled Events ({(currentCustomerData.events || []).length})</h3>
              {(currentCustomerData.events || []).length > 0 ? (
                <div className="space-y-3">
                  {currentCustomerData.events.map((ev, i) => (
                    <div key={i} className="p-4 bg-gray-50 rounded-lg border border-gray-200">
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <div className="flex items-center gap-3 mb-2">
                            <div className={`w-2 h-2 rounded-full ${ev.type === 'Review' ? 'bg-purple-500' : 'bg-green-500'}`}></div>
                            <span className="font-semibold text-sm">{ev.type}</span>
                            <span className={`px-2 py-0.5 rounded text-xs font-medium ${
                              ev.meetingType === 'F2F' ? 'bg-blue-100 text-blue-700' :
                              ev.meetingType === 'Telephone' ? 'bg-orange-100 text-orange-700' :
                              ev.meetingType === 'Teams' ? 'bg-purple-100 text-purple-700' :
                              'bg-cyan-100 text-cyan-700'
                            }`}>
                              {ev.meetingType}
                            </span>
                            <span className="text-gray-600 text-sm">{ev.date}</span>
                          </div>
                          <div className="ml-5">
                            <p className="font-medium text-sm text-gray-800 mb-1">{ev.subject}</p>
                            {ev.notes && (
                              <p className="text-xs text-gray-600 mt-1 whitespace-pre-wrap">{ev.notes}</p>
                            )}
                          </div>
                        </div>
                        <button 
                          onClick={() => {
                            const updated = customers.map(c => {
                              if (c.id === currentCustomerData.id) {
                                return {
                                  ...c,
                                  events: c.events.filter((_, idx) => idx !== i)
                                };
                              }
                              return c;
                            });
                            setCustomers(updated);
                            setSelectedCustomerForEvents(updated.find(c => c.id === currentCustomerData.id));
                            saveData(updated, products);
                          }}
                          className="p-2 text-red-500 hover:bg-red-50 rounded-lg"
                        >
                          <Trash2 size={16} />
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                <p className="text-gray-500 text-center py-8 text-sm">No events scheduled</p>
              )}
            </div>
          </div>
        );
      };

      const renderSummary = () => {
        const upcomingEvents = customers.flatMap(c => 
          (c.events || []).map(e => ({
            ...e,
            customer: c.accountInfo.name,
            customerId: c.id
          }))
        ).sort((a, b) => new Date(a.date) - new Date(b.date));

        return (
          <div className="space-y-6">
            <div>
              <h2 className="text-2xl font-bold text-gray-800">Events Summary</h2>
              <p className="text-gray-600 mt-1">All scheduled reviews and meetings</p>
            </div>

            <div className="grid grid-cols-3 gap-6">
              <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-600 text-sm">Total Customers</p>
                    <p className="text-3xl font-bold text-gray-800 mt-2">{customers.length}</p>
                  </div>
                  <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                    <Users size={24} className="text-blue-600" />
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-600 text-sm">Total Events</p>
                    <p className="text-3xl font-bold text-gray-800 mt-2">{upcomingEvents.length}</p>
                  </div>
                  <div className="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                    <CalendarDays size={24} className="text-purple-600" />
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-lg shadow border border-gray-200 p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-600 text-sm">Upcoming (30 days)</p>
                    <p className="text-3xl font-bold text-gray-800 mt-2">
                      {upcomingEvents.filter(e => {
                        const eventDate = new Date(e.date);
                        const now = new Date();
                        const diff = (eventDate - now) / (1000 * 60 * 60 * 24);
                        return diff >= 0 && diff <= 30;
                      }).length}
                    </p>
                  </div>
                  <div className="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                    <Clock size={24} className="text-green-600" />
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
              <div className="p-6 border-b border-gray-200">
                <h3 className="font-semibold text-lg">All Events</h3>
              </div>
              <div className="overflow-x-auto" style={{maxHeight: '60vh'}}>
                {upcomingEvents.length > 0 ? (
                  <table className="w-full">
                    <thead className="bg-gray-50 sticky top-0">
                      <tr>
                        <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase">Date</th>
                        <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase">Type</th>
                        <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase">Format</th>
                        <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase">Subject/Notes</th>
                        <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase">Customer</th>
                        <th className="px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase">Actions</th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-gray-100">
                      {upcomingEvents.map((ev, idx) => (
                        <tr key={idx} className={`hover:bg-blue-50 ${idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>
                          <td className="px-6 py-4 text-xs font-medium text-gray-800">{ev.date}</td>
                          <td className="px-6 py-4">
                            <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                              ev.type === 'Review' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-green-100 text-green-700'
                            }`}>
                              {ev.type}
                            </span>
                          </td>
                          <td className="px-6 py-4">
                            <span className={`px-2 py-0.5 rounded text-xs font-medium ${
                              ev.meetingType === 'F2F' ? 'bg-blue-100 text-blue-700' :
                              ev.meetingType === 'Telephone' ? 'bg-orange-100 text-orange-700' :
                              ev.meetingType === 'Teams' ? 'bg-purple-100 text-purple-700' :
                              'bg-cyan-100 text-cyan-700'
                            }`}>
                              {ev.meetingType}
                            </span>
                          </td>
                          <td className="px-6 py-4 text-xs text-gray-800">
                            <div className="font-medium">{ev.subject}</div>
                            {ev.notes && <div className="text-gray-600 mt-1 text-xs">{ev.notes.substring(0, 50)}{ev.notes.length > 50 ? '...' : ''}</div>}
                          </td>
                          <td className="px-6 py-4 text-xs text-gray-800">{ev.customer}</td>
                          <td className="px-6 py-4 text-center">
                            <button
                              onClick={() => {
                                const customer = customers.find(c => c.id === ev.customerId);
                                setSelectedCustomerForEvents(customer);
                                setView('events');
                              }}
                              className="text-blue-600 hover:text-blue-800 font-medium text-xs"
                            >
                              View Customer
                            </button>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                ) : (
                  <div className="p-12 text-center text-gray-500">
                    <CalendarDays size={48} className="mx-auto mb-4 text-gray-400" />
                    <p>No events scheduled yet</p>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      };

      const renderTimeline = () => {
        const months = Array.from({length: 12}, (_, i) => {
          const d = new Date();
          d.setMonth(d.getMonth() + i);
          return {
            key: d.toISOString().slice(0, 7),
            label: d.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })
          };
        });

        return (
          <div className="space-y-6">
            <div>
              <h2 className="text-2xl font-bold text-gray-800">Customer Timeline</h2>
              <p className="text-gray-600 mt-1">Track reviews and meetings across your portfolio</p>
            </div>
            
            <div className="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
              <div className="overflow-x-auto" style={{maxHeight: '70vh'}}>
                <table className="w-full">
                  <thead className="bg-gray-50 sticky top-0">
                    <tr>
                      <th className="px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10">Customer</th>
                      {months.map(m => (
                        <th key={m.key} className="px-4 py-3 text-center text-xs font-bold text-gray-700 uppercase" style={{minWidth: '140px'}}>
                          {m.label}
                        </th>
                      ))}
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-100">
                    {customers.map((c, idx) => (
                      <tr key={c.id} className={`hover:bg-blue-50 ${idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>
                        <td className="px-6 py-4 font-semibold text-gray-800 sticky left-0 bg-inherit z-10">
                          <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">
                              {c.accountInfo.name.charAt(0)}
                            </div>
                            {c.accountInfo.name}
                          </div>
                        </td>
                        {months.map(m => {
                          const events = (c.events || []).filter(e => e.date.startsWith(m.key));
                          return (
                            <td key={m.key} className="px-4 py-4">
                              <div className="space-y-1">
                                {events.map((e, i) => (
                                  <div key={i} className={`px-3 py-1.5 rounded-lg text-xs font-medium ${
                                    e.type === 'Review' 
                                      ? 'bg-purple-100 text-purple-700 border border-purple-200' 
                                      : 'bg-green-100 text-green-700 border border-green-200'
                                  }`}>
                                    {e.type} • {e.date.slice(8)}
                                  </div>
                                ))}
                              </div>
                            </td>
                          );
                        })}
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        );
      };

      return (
        <div className="min-h-screen bg-gray-100 p-6">
          <div className="max-w-7xl mx-auto">
            <div className="bg-white rounded-lg shadow-lg overflow-hidden">
              <div className="bg-gradient-to-r from-blue-600 to-purple-600 p-6">
                <div className="flex justify-between items-center">
                  <div>
                    <h1 className="text-3xl font-bold text-white">Customer Onboarding</h1>
                    <p className="text-blue-100 mt-1">Manage your customer portfolio with ease</p>
                  </div>
                  <div className="flex gap-3">
                    <button
                      onClick={() => setView('list')}
                      className={`px-5 py-2.5 rounded-lg font-semibold transition-all flex items-center ${
                        view === 'list' 
                          ? 'bg-white text-purple-600' 
                          : 'bg-white/20 text-white hover:bg-white/30'
                      }`}
                    >
                      <Users size={18} className="inline mr-2" />
                      Customers
                    </button>
                    <button
                      onClick={() => setView('summary')}
                      className={`px-5 py-2.5 rounded-lg font-semibold transition-all flex items-center ${
                        view === 'summary' 
                          ? 'bg-white text-purple-600' 
                          : 'bg-white/20 text-white hover:bg-white/30'
                      }`}
                    >
                      <CalendarDays size={18} className="inline mr-2" />
                      Events Summary
                    </button>
                    <button
                      onClick={() => setView('timeline')}
                      className={`px-5 py-2.5 rounded-lg font-semibold transition-all flex items-center ${
                        view === 'timeline' 
                          ? 'bg-white text-purple-600' 
                          : 'bg-white/20 text-white hover:bg-white/30'
                      }`}
                    >
                      <Clock size={18} className="inline mr-2" />
                      Timeline
                    </button>
                  </div>
                </div>
              </div>

              <div className="p-6">
                {view === 'onboard' && (
                  <>
                    <div className="mb-8">
                      <div className="flex items-center justify-between mb-8">
                        <div className="flex items-center gap-4">
                          {[1,2,3,4,5].map(s => (
                            <React.Fragment key={s}>
                              <div className="flex flex-col items-center">
                                <div
                                  className={`w-12 h-12 rounded-lg flex items-center justify-center font-bold text-lg transition-all ${
                                    s === step 
                                      ? 'bg-blue-600 text-white shadow-lg' 
                                      : s < step 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-gray-200 text-gray-500'
                                  }`}
                                >
                                  {s < step ? <Check size={20} /> : s}
                                </div>
                                <span className={`text-xs mt-2 font-semibold ${s === step ? 'text-blue-600' : 'text-gray-500'}`}>
                                  {stepLabels[s-1]}
                                </span>
                              </div>
                              {s < 5 && (
                                <div className={`h-1 w-12 rounded ${s < step ? 'bg-green-600' : 'bg-gray-200'}`}></div>
                              )}
                            </React.Fragment>
                          ))}
                        </div>
                        <button
                          onClick={() => setView('list')}
                          className="px-5 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>

                    <div className="bg-white rounded-lg p-8 border border-gray-200">
                      {renderOnboarding()}
                    </div>

                    <div className="mt-8 flex justify-between">
                      <button
                        onClick={() => setStep(Math.max(1, step - 1))}
                        disabled={step === 1}
                        className="px-8 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold"
                      >
                        Previous
                      </button>
                      {step < 5 ? (
                        <button
                          onClick={() => setStep(step + 1)}
                          className="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold"
                        >
                          Next Step
                        </button>
                      ) : (
                        <button
                          onClick={saveCustomer}
                          className="px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-semibold flex items-center"
                        >
                          <Save size={18} className="inline mr-2" />
                          {currentCustomer ? 'Update Customer' : 'Save Customer'}
                        </button>
                      )}
                    </div>
                  </>
                )}

                {view === 'list' && renderList()}
                {view === 'events' && renderEventManagement()}
                {view === 'summary' && renderSummary()}
                {view === 'timeline' && renderTimeline()}
              </div>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
